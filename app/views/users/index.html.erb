<section id="table" class="section-with-bg">
  <div class="container aos-init aos-animate" data-aos="fade-up">
    <div class="section-header">
      <h2 class="mt-5">User List</h2>
      <p>ユーザー一覧</p>
    </div>
    <section id="search-form">
      <div class="container aos-init aos-animate" data-aos="zoom-in">
        <%= form_with(url: search_users_path, local: true, method: :get ) do |f| %>
          <div class="row justify-content-center">
            <div class="col-lg-6 col-md-10 d-flex">
              <%= f.text_field :keyword, class:"form-control border border-dark-subtle", placeholder:"ユーザー名を入力" %>
              <%= f.button "検索", :type => "submit", class:"ms-2" %>
            </div>
          </div>
        <% end %>
      </div>
    </section>
    <div class="tab-content row justify-content-center aos-init aos-animate" data-aos="fade-up" data-aos-delay="200">
      <div role="tabpanel" class="col-lg-9 tab-pane fade show active" id="day-1">
        <h3>ユーザー数: <%= @users_count %>人</h3>
        <% @users.each do |user| %>
          <% if user.id != @current_user.id %>
            <div class="table-item">
              <div class="speaker">
                <% if user.image.attached? %>
                  <%= image_tag(rails_blob_path(user.image)) %>
                <% else %>
                  <%= image_tag("default_user.png") %>
                <% end %>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <div class="contents-area">
                  <h4><%= user.name %></h4>
                  <div class="d-flex">
                    <p class="mb-1 me-2">フォロー数: <%= user.followings.count %>人</p>
                    <p class="mb-1">フォロワー数: <%= user.followers.count %>人</p>
                  </div>
                </div>
                <div class="d-flex flex-column contents-area text-center">
                  <% if @current_user.following?(user) %>
                    <%= link_to "フォロー済み", user_relationships_path(user.id), data: { "turbo-method": :delete }, class:"btn-1" %>
                  <% else %>
                    <%= link_to "フォローする", user_relationships_path(user.id), data: { "turbo-method": :post }, class:"btn-2" %>
                  <% end %>
                  <%= link_to "プロフィールへ", user_path(user), class:"btn-1 mt-1" %>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  <div>
</section>